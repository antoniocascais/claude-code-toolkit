---
name: note-taking
description: Manages task notes and knowledge base entries. Use when creating/updating notes, curating knowledge, reviewing task progress, saving session progress, remembering information, writing notes, or at session end for cleanup.
allowed-tools:
  - Read
  - Write
  - Edit
  - Glob
  - Grep
  - AskUserQuestion
  - Bash(git diff:*)
context: fork
---

# Note-Taking Skill

Manages task notes and knowledge base entries across sessions.

## Workflow

Execute these steps in order, with ONE user interaction point.

### Step 1: Assess

1. Read existing notes (if any)
2. Calculate file size in characters

### Step 2: Analyze & Propose

Prepare a summary showing:
```
Current state:
- File: notes.md (13.6k chars)
- Status: ⚠️ Over 10k limit - needs trimming

Proposed changes:
- ADD: "Next Steps" section with priorities
- MODIFY: Update "Current Status"
- REMOVE: Outdated historical section
- CONSOLIDATE: Merge 4 session logs → 1 summary
```

### Step 3: Ask (Single Interaction)

**Use AskUserQuestion with multiple questions:**

```json
{
  "questions": [
    {
      "question": "Apply these changes to notes?",
      "header": "Apply",
      "options": [
        {"label": "Yes, apply", "description": "Write the proposed changes"},
        {"label": "No, cancel", "description": "Abort without changes"}
      ],
      "multiSelect": false
    },
    {
      "question": "Commit to git? (knowledge base only)",
      "header": "Commit",
      "options": [
        {"label": "Yes, commit", "description": "Stage and commit changes"},
        {"label": "No, skip", "description": "Leave uncommitted"}
      ],
      "multiSelect": false
    }
  ]
}
```

For task notes, only ask the first question.

### Step 4: Execute

If user approved:
1. Write the changes
2. Run `git diff <file>` to capture changes
3. Create log file (see Logging section)
4. Report log path to user

### Step 5: Log & Report

Create log at `/tmp/note-taking-<timestamp>.log`:

```
=== Note-Taking Log ===
Timestamp: 2026-01-20T14:32:15
Task: <task-name>
File: <file-path>

Initial size: 13.6k chars
Final size: 8.2k chars

User decisions:
- Apply: Yes
- Commit: No

Changes (git diff):
<output of git diff>
```

**Return to main conversation:**
```
Notes updated. Log: /tmp/note-taking-20260120-143215.log
```

---

## Notes Location

### Task Notes (Temporary)
- **Path**: `/path/to/claude/tasks_notes/<task_name>/notes.md`
- **Audience**: Claude only

### Knowledge Base (Permanent)
- **Path**: `/path/to/claude/knowledge_base/<domain>/<topic>.md`
- **Audience**: Human-readable

## What to Document

**Task Notes**: Project context, progress, blockers, next steps, user preferences

**Knowledge Base**: Complex patterns, tool configs, non-obvious solutions, edge cases

## File Size Limit

Target: **under 10k chars**. If over, propose trimming by:
- Consolidating session logs
- Removing outdated sections
- Archiving completed work

## Essential Tags (Knowledge Base)

**Domain**: `#tools`, `#web`, `#devops`, `#databases`, `#programming`
**Type**: `#configuration`, `#troubleshooting`, `#pattern`, `#reference`
**Status**: `#needs_revision`, `#verified`, `#deprecated`

## Templates

- Task notes: `templates/task-notes.md`
- Knowledge base: `templates/knowledge-entry.md`
- Formatting: `references/obsidian-formatting.md`
