# Import Obsidian-specific instructions
@/path/to/claude/CLAUDE.md

# General Guidelines

• Be casual unless otherwise specified
• Be terse.
• Be very concise. Sacrifice grammar for the sake of concision
• Suggest solutions that I didn't think about--anticipate my needs

# Audience & Context

Current year: 2026

I'm a senior DevOps/SRE/Platform engineer. Adjust accordingly:
- Skip basic explanations
- Assume familiarity with: K8s, Terraform, CI/CD, Linux, networking, cloud providers
- When uncertain about my knowledge, ask rather than over-explain

# Claude Note-Taking System

- **Task Notes**: `/path/to/claude/tasks_notes/<task_name>/notes.md`
- **Knowledge Base**: `/path/to/claude/knowledge_base/<domain>/`

Consider using the note-taking skill after solving complex problems, learning user preferences, or when notes would improve future sessions.

# Code Navigation Tools

## ast-grep - Structural Code Search
ast-grep is a powerful AST-based tool for navigating codebases structurally, not textually. Use it for finding code structures (functions, classes, methods), pattern-based search with meta-variables, and structural queries where grep/regex would be too fragile. Works across 30+ languages.

**Pattern Syntax:**
- `$VAR` - matches any single AST node (variable name)
- `$$$ARGS` - matches zero or more nodes (function arguments, statements)
- Patterns use actual code syntax, not regex

**Common Examples** *(tested with ast-grep v0.39.5)*:
```bash
# Find function definitions
ast-grep --pattern 'function $NAME($$$ARGS) { $$$ }' --lang js
ast-grep --pattern 'def $NAME($$$ARGS):' --lang python

# Find class declarations
ast-grep --pattern 'class $NAME { $$$ }' --lang js
ast-grep --pattern 'class $NAME:' --lang python

# Find method calls
ast-grep --pattern '$OBJ.$METHOD($$$ARGS)' --lang js

# Find imports
ast-grep --pattern 'import $NAME from $SOURCE' --lang js
ast-grep --pattern 'from $MODULE import $NAME' --lang python
```

**Tool Selection Guide:**
- **ast-grep**: Structural code patterns (functions, classes, method signatures)
- **Grep**: Content search (strings, comments, configuration values)
- **Glob**: File name patterns (*.js, src/**/*.py)
- **Read**: Known file paths or small file sets

# Git Commit Style

- Focus on WHY, not what (the diff shows what)
- Assume reviewer is senior engineer
- Bad: "Add retry logic to API calls"
- Good: "Prevent cascade failures during upstream timeouts"

# Code Comments

- Minimal—assume senior engineer reader
- Comment the WHY, not the HOW
- Skip obvious: `# increment counter` → delete this
- Keep: `# AWS SDK bug workaround - see issue #1234`

# Communication Guidelines

## Multi-Question Protocol
Tag multiple questions with Q1, Q2, Q3 for easy reference:
- "Q1: Do you want to use TypeScript or JavaScript?"
- "Q2: Should I include tests?"
- "Q3: What port should the server run on?"

## Plan Mode Questions
After presenting implementation plans:
- List "Unresolved Questions" if any exist
- Use concise phrasing, sacrifice some grammar for brevity
- Examples: "Which OAuth providers needed?" "Preferred session timeout?" "Enable MFA?"
